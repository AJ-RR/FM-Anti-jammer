function modulated_sig = fm_transmitter(message,Fc,Fs,freq_dev)
  hop_sequence = [1,2,3,4,5];
  hop_duration = 2*Fs;
  overlap  = 100;
  modulated_sig = [];
  m_length = length(message);
%   b = [1 -0.95];
%   a = 1;
%   message = filter(b,a,message);
  %Modulate sequentially
  for i = hop_sequence
    if m_length <= hop_duration

          modulated = fmmod(message((i-1)*hop_duration - overlap : length(message)),i*Fc, Fs, freq_dev);
          modulated_sig = [modulated_sig,modulated, zeros(hop_duration - length(message))];
      else
        if(i == 1)
            w = hamming(length(message(1:hop_duration + overlap)),'periodic');
            disp(length(w))
            modulated = fmmod(message(1:hop_duration + overlap)*w,i*Fc,Fs,freq_dev);
            modulated_sig = [modulated_sig,modulated];
            m_length = m_length - hop_duration;
        else
%             modulated = fmmod(message((i - 1)*hop_duration : i*hop_duration), i*Fc, Fs, freq_dev);
            modulated = fmmod(message((i - 1)*hop_duration - overlap: i*hop_duration + overlap) , i*Fc, Fs, freq_dev);
            modulated_sig = [modulated_sig,modulated];
            m_length = m_length - hop_duration;
        end
      end
  end
  end  